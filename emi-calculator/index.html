<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>EMI Calculator | CalcWorld</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="canonical" href="https://calcworld.in/emi-calculator/">
<meta name="description" content="Advanced EMI Calculator with EMI increase and lump sum prepayment options. Calculate interest saved and reduced loan tenure accurately.">

<style>
body {
  font-family: Arial, sans-serif;
  background:#f4f6f8;
  font-size:15px;
}

.site-header {
  position: sticky;
  top: 0;
  background: #ffffff;
  padding: 12px 20px;
  border-bottom: 1px solid #e5e7eb;
  z-index: 1000;
}

.site-header .brand {
  font-size: 20px;
  font-weight: bold;
  color: #2563eb;
  text-decoration: none;
}

.container {
  max-width:440px;
  margin:40px auto;
  background:#fff;
  padding:22px;
  border-radius:10px;
  box-shadow:0 4px 12px rgba(0,0,0,.1);
}

h1 { text-align:center; }

label {
  display:block;
  margin-top:14px;
  font-weight:bold;
}

input, select {
  width:100%;
  padding:10px;
  margin-top:6px;
  border-radius:6px;
  border:1px solid #ccc;
  font-size:15px;
}

button {
  width:100%;
  margin-top:18px;
  padding:12px;
  background:#2563eb;
  color:#fff;
  border:none;
  border-radius:6px;
  font-size:16px;
  cursor:pointer;
}

.link {
  display:block;
  margin-top:10px;
  font-size:13px;
  color:#2563eb;
  text-decoration:none;
}

.box {
  margin-top:14px;
  padding:14px;
  border:1px solid #ddd;
  border-radius:6px;
}

.hidden { display:none; }

table {
  width:100%;
  border-collapse:collapse;
  margin-top:16px;
  font-size:14px;
}

th, td {
  border:1px solid #ccc;
  padding:7px;
  text-align:center;
}

th { background:#f0f0f0; }

.note {
  margin-top:14px;
  font-size:13px;
  color:#555;
  background:#fafafa;
  padding:12px;
  border-radius:6px;
}
</style>
</head>

<body>

<header class="site-header">
  <nav aria-label="Primary navigation">
    <a href="https://calcworld.in" class="brand">CalcWorld</a>
  </nav>
</header>

<div class="container">
<h1>EMI Calculator</h1>

<label>Loan Amount (₹)</label>
<input id="loan" placeholder="e.g 10,00,000">

<label>Interest Rate (% per year)</label>
<input type="number" id="rate" placeholder="e.g 14">

<label>Loan Tenure (years)</label>
<input type="number" id="tenure" placeholder="e.g 5" min="1" step="1">

<a class="link" href="./emi-breakdown.html">
  Already have a loan? View EMI breakdown →
</a>

<a class="link" href="#" onclick="toggleAdvanced(); return false;">
  ▶ Advanced Options
</a>

<div id="advancedBox" class="box hidden">

<label>Strategy</label>
<select id="strategy">
  <option value="emi">EMI Increase</option>
  <option value="lump">Lump Sum Prepayment</option>
</select>

<!-- EMI INCREASE -->
<div id="emiBox">
  <label>Increase Type</label>
  <select id="emiType">
    <option value="percent">Percentage (%)</option>
    <option value="amount">Fixed Amount (₹)</option>
  </select>

  <label>Increase Value</label>
  <input type="number" id="emiValue">

  <label>Frequency</label>
  <select id="emiFreq">
    <option value="1">One-time</option>
    <option value="3">Every 3 months</option>
    <option value="6">Every 6 months</option>
    <option value="12">Every 12 months</option>
  </select>

  <label>Start Increase</label>
  <select id="emiStart">
    <option value="0">From Month 1</option>
    <option value="1">After First Frequency</option>
  </select>
</div>

<!-- LUMP SUM -->
<div id="lumpBox" class="hidden">
  <label>Lump Sum Amount (₹)</label>
  <input type="number" id="lumpAmount">

  <label>Frequency</label>
  <select id="lumpFreq">
    <option value="1">One-time</option>
    <option value="6">Every 6 months</option>
    <option value="12">Every 12 months</option>
  </select>
</div>

<div class="note">
<b>How it works</b><br><br>
Extra payments reduce the principal earlier.
Since interest is calculated monthly on the remaining balance,
lower principal means less interest in future months.
This compounding effect shortens your loan tenure.
</div>
</div>

<button onclick="calculate()">Calculate</button>
<div id="output"></div>
</div>

<script>
function inr(n){ return n.toLocaleString("en-IN"); }
function num(v){ return Number(v)||0; }

loan.addEventListener("input",e=>{
  let v=e.target.value.replace(/\D/g,'');
  e.target.value=v?inr(+v):"";
});

function toggleAdvanced(){
  advancedBox.classList.toggle("hidden");
}

strategy.addEventListener("change",e=>{
  emiBox.classList.toggle("hidden",e.target.value!=="emi");
  lumpBox.classList.toggle("hidden",e.target.value!=="lump");
});

function calculate(){
  const P = num(loan.value.replace(/,/g,''));
  const rateVal = num(rate.value);
  const N = num(years.value)*12;

  if(!P||!rateVal||!N){
    alert("Please fill all loan details");
    return;
  }

  const r = rateVal/12/100;
  const EMI = P*r*Math.pow(1+r,N)/(Math.pow(1+r,N)-1);

  // BASE LOAN
  let bal=P, baseInterest=0;
  for(let m=1;m<=N;m++){
    let i=bal*r;
    baseInterest+=i;
    bal-=EMI-i;
  }

  // NORMAL MODE
  if(advancedBox.classList.contains("hidden")){
    output.innerHTML=`
      <div class="note">
        <b>Monthly EMI:</b> ₹${inr(Math.round(EMI))}<br>
        <b>Tenure:</b> ${N} months<br>
        <b>Total Interest:</b> ₹${inr(Math.round(baseInterest))}<br>
        <b>Total Amount Paid:</b> ₹${inr(Math.round(P+baseInterest))}
      </div>`;
    return;
  }

  // ADVANCED MODE (RESTORED)
  let curEMI=EMI, bal2=P, interest2=0, m=0;
  let rows="";

  while(bal2>0 && m<600){
    m++;

    // EMI INCREASE
    if(strategy.value==="emi" && num(emiValue.value)){
      let start = emiStart.value==0 ? 1 : num(emiFreq.value)+1;
      let t = m-start;
      if(m>=start && (
        (emiFreq.value==1 && t==0) ||
        (emiFreq.value>1 && t>=0 && t%emiFreq.value==0)
      )){
        curEMI = emiType.value==="percent"
          ? curEMI*(1+num(emiValue.value)/100)
          : curEMI+num(emiValue.value);
      }
    }

    // LUMP SUM
    if(strategy.value==="lump" && num(lumpAmount.value)){
      if((lumpFreq.value==1 && m==1) ||
         (lumpFreq.value>1 && m%lumpFreq.value==0)){
        bal2-=num(lumpAmount.value);
      }
    }

    let interest=bal2*r;
    let principal=Math.min(curEMI-interest,bal2);
    let emiShown=interest+principal;

    interest2+=interest;
    bal2-=principal;

    rows+=`
    <tr>
      <td>${m}</td>
      <td>₹${inr(Math.round(emiShown))}</td>
      <td>₹${inr(Math.round(interest))}</td>
      <td>₹${inr(Math.round(principal))}</td>
      <td>₹${inr(Math.max(0,Math.round(bal2)))}</td>
    </tr>`;
  }

  const interestSaved = Math.round(baseInterest - interest2);
  const totalSaved = Math.round((P + baseInterest) - (P + interest2));
  const monthsSaved = N - m;

  output.innerHTML=`
  <table>
    <tr><th>Metric</th><th>Normal</th><th>Advanced</th><th>Savings</th></tr>
    <tr><td>Tenure</td><td>${N}</td><td>${m}</td><td>${monthsSaved} months</td></tr>
    <tr><td>Total Interest</td><td>₹${inr(baseInterest)}</td><td>₹${inr(interest2)}</td><td>₹${inr(interestSaved)}</td></tr>
    <tr><td>Total Paid</td><td>₹${inr(P+baseInterest)}</td><td>₹${inr(P+interest2)}</td><td>₹${inr(totalSaved)}</td></tr>
  </table>

  <table>
    <tr><th>Month</th><th>EMI</th><th>Interest</th><th>Principal</th><th>Balance</th></tr>
    ${rows}
  </table>

  <div class="note">
    Disclaimer: Approximate illustration. Actual lender schedules may vary.
  </div>`;
}
</script>

</body>
</html>
