<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Reality-Check Trading Calculator | CalcWorld</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Arial;background:#f6f7fb;margin:0}
.container{max-width:520px;margin:40px auto;background:#fff;
padding:20px;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.08)}
label{display:block;margin-top:14px;font-size:14px}
input,select{width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #ccc}
button{width:100%;margin-top:20px;padding:12px;font-size:16px;
border:none;border-radius:10px;background:#2563eb;color:#fff}
.result{margin-top:20px;background:#f1f5ff;padding:14px;border-radius:10px;display:none}
.green{color:#16a34a;font-weight:bold}
.red{color:#dc2626;font-weight:bold}
</style>
</head>

<body>
<div class="container">
<h2>Reality-Check Trading Calculator</h2>

<label>Starting Capital (₹)</label>
<input type="number" id="capital" value="100000" min="1000" max="1000000">

<label>Trading Segment</label>
<select id="segment">
  <option value="intraday">Equity – Intraday</option>
  <option value="fno">F&O – Intraday</option>
</select>

<label>Average Profit per Trade (%)</label>
<input type="number" id="profit" value="3" min="0" max="20">

<label>Average Loss per Trade (%)</label>
<input type="number" id="loss" value="1" min="0" max="20">

<label>Win Rate (%)</label>
<input type="number" id="win" value="55" min="0" max="100">

<label><input type="checkbox" id="charges" checked> Include charges</label>
<label><input type="checkbox" id="compound" checked> Apply compounding</label>

<button onclick="run()">Run Reality Check</button>

<div class="result" id="out"></div>
</div>

<script>
function chargePerTrade(cap, seg){
  let broker=0, stt=0, ex=0, sebi=0, gst=0;

  if(seg==="intraday"){
    broker=Math.min(0.0003*cap,40);
    stt=0.00025*(cap/2);
    ex=0.0000325*cap;
    sebi=(10/10000000)*cap;
    gst=0.18*(broker+ex+sebi);
  }

  if(seg==="fno"){
    broker=40;
    stt=0.0001*(cap/2);
    ex=0.00002*cap;
    sebi=(10/10000000)*cap;
    gst=0.18*(broker+ex+sebi);
  }

  return broker+stt+ex+sebi+gst;
}

function run(){
  let capital=+document.getElementById("capital").value;
  let baseCapital=capital;

  let p=+profit.value/100;
  let l=+loss.value/100;
  let w=+win.value/100;

  let E=(w*p)-((1-w)*l);
  let days=250;
  let totalCharges=0;
  let totalPnL=0;

  for(let i=0;i<days;i++){
    let gross=capital*E;
    let ch=charges.checked ? chargePerTrade(capital,segment.value) : 0;
    let net=gross-ch;

    totalCharges+=ch;

    if(compound.checked){
      capital+=net;
    } else {
      totalPnL+=net;
    }
  }

  if(!compound.checked){
    capital=baseCapital+totalPnL;
  }

  let profitYear=capital-baseCapital;

  out.innerHTML=`
    <p><strong>Yearly Net Profit:</strong> ₹${Math.round(profitYear).toLocaleString("en-IN")}</p>
    <p><strong>Final Capital:</strong> ₹${Math.round(capital).toLocaleString("en-IN")}</p>
    <p><strong>Total Charges Paid:</strong> ₹${Math.round(totalCharges).toLocaleString("en-IN")}</p>
    <p><strong>Verdict:</strong>
      ${profitYear>0?'<span class="green">Positive Expectancy</span>':'<span class="red">Negative Expectancy</span>'}
    </p>
  `;
  out.style.display="block";
}
</script>
</body>
</html>
