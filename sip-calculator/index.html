<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SIP & Lumpsum Calculator | CalcWorld</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Calculate SIP and Lumpsum investment returns easily with CalcWorld.">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{font-family:Arial,sans-serif;background:#f6f7f9;margin:0}
header{background:#fff;padding:16px 20px;box-shadow:0 2px 4px rgba(0,0,0,.05)}
main{max-width:420px;margin:30px auto;padding:0 16px}
.card{background:#fff;padding:20px;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.08)}

.tabs{display:flex;background:#eef2f7;border-radius:30px;padding:4px;margin-bottom:20px}
.tab{flex:1;text-align:center;padding:10px;border-radius:30px;font-weight:bold;cursor:pointer}
.tab.active{background:#2563eb;color:#fff}

.field{margin-bottom:22px}
.label{display:flex;justify-content:space-between;font-weight:bold;margin-bottom:8px}

.input-box{
  display:flex;
  align-items:center;
  gap:4px;
  background:#eafff6;
  padding:6px 8px;
  border-radius:6px;
}
.input-box input{
  border:none;
  background:transparent;
  width:90px;
  text-align:right;
  font-weight:bold;
  outline:none;
}

input[type=range]{width:100%}

.results{margin-top:20px}
.result{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
  font-weight:bold
}
.left{display:flex;align-items:center;gap:8px}
.bar{width:14px;height:6px;border-radius:3px}
.blue{background:#2563eb}
.yellow{background:#facc15}

canvas{max-width:220px;margin:20px auto 0;display:block}
</style>
</head>

<body>

<header>
  <h2 style="margin:0">CalcWorld</h2>
</header>

<main>
<div class="card">

<!-- Tabs -->
<div class="tabs">
  <div class="tab active" id="sipTab">SIP</div>
  <div class="tab" id="lumpTab">Lumpsum</div>
</div>

<!-- Amount -->
<div class="field">
  <div class="label">
    <span id="amountLabel">Monthly Investment</span>
    <div class="input-box">₹ <input type="text" id="amountInput" value="10,000"></div>
  </div>
  <input type="range" id="amountRange" min="500" max="100000" step="500" value="10000">
</div>

<!-- Return -->
<div class="field">
  <div class="label">
    <span>Expected Return</span>
    <div class="input-box"><input type="number" id="returnInput" step="0.1" value="12"> %</div>
  </div>
  <input type="range" id="returnRange" min="1" max="30" step="0.1" value="12">
</div>

<!-- Time -->
<div class="field">
  <div class="label">
    <span>Time Period</span>
    <div class="input-box"><input type="number" id="yearInput" value="10"> Yr</div>
  </div>
  <input type="range" id="yearRange" min="1" max="40" step="1" value="10">
</div>

<!-- Results -->
<div class="results">
  <div class="result">
    <div class="left"><span class="bar blue"></span>Total Invested</div>
    <span id="invested">₹0</span>
  </div>
  <div class="result">
    <div class="left"><span class="bar yellow"></span>Estimated Returns</div>
    <span id="returns">₹0</span>
  </div>
  <div class="result">
    <div class="left">Maturity Value</div>
    <span id="maturity">₹0</span>
  </div>
</div>

<!-- Chart -->
<canvas id="donutChart"></canvas>

</div>
</main>

<script>
/* ---------- STATE ---------- */
let mode = "sip";

/* ---------- ELEMENTS ---------- */
const amountInput = document.getElementById("amountInput");
const amountRange = document.getElementById("amountRange");
const returnInput = document.getElementById("returnInput");
const returnRange = document.getElementById("returnRange");
const yearInput = document.getElementById("yearInput");
const yearRange = document.getElementById("yearRange");

const investedEl = document.getElementById("invested");
const returnsEl = document.getElementById("returns");
const maturityEl = document.getElementById("maturity");

const amountLabel = document.getElementById("amountLabel");
const sipTab = document.getElementById("sipTab");
const lumpTab = document.getElementById("lumpTab");

/* ---------- HELPERS ---------- */
const formatCurrency = n =>
  new Intl.NumberFormat("en-IN",{
    style:"currency",
    currency:"INR",
    maximumFractionDigits:0
  }).format(Math.round(n));

const parseAmount = v => Number(v.replace(/,/g,""));
const formatInput = v => v.toLocaleString("en-IN");

/* ---------- CHART ---------- */
const chart = new Chart(document.getElementById("donutChart"),{
  type:"doughnut",
  data:{
    labels:["Estimated Returns","Invested Amount"],
    datasets:[{
      data:[0,0],
      backgroundColor:["#facc15","#2563eb"]
    }]
  },
  options:{
    plugins:{
      legend:{position:"bottom"},
      tooltip:{
        callbacks:{
          label:c=>`${c.label}: ${formatCurrency(c.raw)}`
        }
      }
    }
  }
});

/* ---------- CALCULATION ---------- */
function calculate(){
  const A = parseAmount(amountInput.value);
  const r = returnInput.value / 100;
  const y = yearInput.value;

  let invested, maturity;

  if(mode === "sip"){
    const rm = r / 12;
    const n = y * 12;
    invested = A * n;
    maturity = A * ((Math.pow(1+rm,n)-1)/rm) * (1+rm);
  } else {
    invested = A;
    maturity = A * Math.pow(1+r, y);
  }

  investedEl.textContent = formatCurrency(invested);
  returnsEl.textContent = formatCurrency(maturity - invested);
  maturityEl.textContent = formatCurrency(maturity);

  chart.data.datasets[0].data = [maturity-invested, invested];
  chart.update();
}

/* ---------- MODE SWITCH ---------- */
function switchMode(newMode){
  mode = newMode;
  sipTab.classList.toggle("active", mode==="sip");
  lumpTab.classList.toggle("active", mode==="lump");

  amountLabel.textContent =
    mode==="sip" ? "Monthly Investment" : "Investment Amount";

  calculate();
}

sipTab.onclick = ()=>switchMode("sip");
lumpTab.onclick = ()=>switchMode("lump");

/* ---------- INPUT SYNC ---------- */
amountInput.oninput = ()=>{
  const v = parseAmount(amountInput.value || "0");
  amountRange.value = v;
  amountInput.value = formatInput(v);
  calculate();
};
amountRange.oninput = ()=>{
  amountInput.value = formatInput(+amountRange.value);
  calculate();
};

returnInput.oninput = ()=>{
  returnRange.value = returnInput.value;
  calculate();
};
returnRange.oninput = ()=>{
  returnInput.value = returnRange.value;
  calculate();
};

yearInput.oninput = ()=>{
  yearRange.value = yearInput.value;
  calculate();
};
yearRange.oninput = ()=>{
  yearInput.value = yearRange.value;
  calculate();
};

/* ---------- INIT ---------- */
calculate();
</script>

</body>
</html>
