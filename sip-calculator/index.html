<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SIP & Lumpsum Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{font-family:Arial;background:#f6f7f9;margin:0}
header{padding:14px 20px;background:#fff;border-bottom:1px solid #e5e7eb}
header a{font-size:20px;font-weight:bold;color:#2563eb;text-decoration:none}
main{max-width:420px;margin:30px auto;padding:16px}
.card{background:#fff;padding:20px;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.08)}

.tabs{display:flex;background:#eef2f7;border-radius:30px;padding:4px;margin-bottom:20px}
.tab{flex:1;text-align:center;padding:10px;border-radius:30px;font-weight:bold;cursor:pointer}
.tab.active{background:#2563eb;color:#fff}

.field{margin-bottom:16px}
.label{display:flex;justify-content:space-between;font-weight:bold;margin-bottom:6px}

.input-box{background:#eafff6;padding:6px 10px;border-radius:6px}
.input-box input{border:none;background:transparent;font-weight:bold;text-align:right;width:110px}

input[type=range]{width:100%}

.advanced-toggle{margin:12px 0;font-weight:bold}
.advanced{display:none;background:#f1f5f9;padding:12px;border-radius:12px}

table{width:100%;border-collapse:collapse;margin-top:16px;font-size:14px}
th,td{padding:6px}
th{text-align:left}
td{text-align:right}
td.diff{font-weight:bold}

canvas{max-width:220px;margin:20px auto 0;display:block}
</style>
</head>

<body>

<header>
  <a href="https://calcworld.in/">CalcWorld</a>
</header>

<main>
<div class="card">

<div class="tabs">
  <div class="tab active" id="sipTab">SIP</div>
  <div class="tab" id="lumpTab">Lumpsum</div>
</div>

<div class="field">
  <div class="label">
    <span id="amountLabel">Monthly Investment</span>
    <div class="input-box">₹ <input id="amountInput" type="number" min="100"></div>
  </div>
  <input type="range" id="amountRange">
</div>

<div class="field">
  <div class="label">
    <span>Expected Return</span>
    <div class="input-box"><input id="returnInput" type="number" min="1" max="50" step="0.1"> %</div>
  </div>
  <input type="range" id="returnRange" min="1" max="50" step="0.1">
</div>

<div class="field">
  <div class="label">
    <span>Time Period</span>
    <div class="input-box"><input id="yearInput" type="number" min="1" max="50"> Yr</div>
  </div>
  <input type="range" id="yearRange" min="1" max="50">
</div>

<div class="advanced-toggle">
  <label><input type="checkbox" id="advToggle"> Enable Advanced</label>
</div>

<div class="advanced" id="advancedBox">

  <div id="sipAdvance">
    Increase SIP by
    <input id="sipIncValue" type="number" value="10" min="1" max="20" style="width:70px">
    <select id="sipIncType">
      <option value="percent" selected>%</option>
      <option value="rupee">₹</option>
    </select>
    every
    <select id="sipIncInterval">
      <option value="12">1 Year</option>
      <option value="6">6 Months</option>
    </select>
  </div>

  <div id="lumpAdvance" style="display:none">
    Reinvest same amount every
    <select id="lumpInterval">
      <option value="12">1 Year</option>
      <option value="6">6 Months</option>
    </select>
  </div>

</div>

<table>
<thead>
<tr><th></th><th>Normal</th><th>Advanced</th><th>Difference</th></tr>
</thead>
<tbody>
<tr><th>Total Invested</th><td id="nInv">₹0</td><td id="aInv">₹0</td><td class="diff" id="dInv">₹0</td></tr>
<tr><th>Estimated Returns</th><td id="nRet">₹0</td><td id="aRet">₹0</td><td class="diff" id="dRet">₹0</td></tr>
<tr><th>Maturity Value</th><td id="nMat">₹0</td><td id="aMat">₹0</td><td class="diff" id="dMat">₹0</td></tr>
</tbody>
</table>

<canvas id="chart"></canvas>

</div>
</main>

<script>
const $=id=>document.getElementById(id);
const fmt=n=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(Math.round(n));
const clamp=(v,min,max)=>Math.min(Math.max(v,min),max);
let mode="sip";

const chart=new Chart($("chart"),{
  type:"doughnut",
  data:{labels:["Returns","Invested"],datasets:[{data:[0,0],backgroundColor:["#facc15","#2563eb"]}]},
  options:{plugins:{legend:{position:"bottom"}}}
});

function syncAmountLimits(){
  amountRange.min=100;
  amountRange.max=mode==="sip"?1000000:1000000000;
  amountInput.max=amountRange.max;
}

function calcSIP(A,r,y,adv){
  const rm=r/12,n=y*12;
  let sip=A,inv=0,mat=0;

  let inc=+sipIncValue.value||0;
  if(sipIncType.value==="percent"){
    inc=clamp(inc,1,20);
    sipIncValue.max=20;
  }else{
    inc=clamp(inc,0,100000);
    sipIncValue.max=100000;
  }
  sipIncValue.value=inc;

  const int=+sipIncInterval.value;

  for(let m=1;m<=n;m++){
    if(adv && m>int && (m-1)%int===0){
      sip+=sipIncType.value==="percent"?sip*(inc/100):inc;
    }
    inv+=sip;
    mat+=sip*Math.pow(1+rm,n-m+1);
  }
  return {inv,mat};
}

function calcLump(A,r,y,adv){
  const rm=r/12,n=y*12;
  let inv=A,mat=A*Math.pow(1+rm,n);

  if(adv){
    const int=+lumpInterval.value;
    for(let m=int+1;m<=n;m+=int){
      inv+=A;
      mat+=A*Math.pow(1+rm,n-m+1);
    }
  }
  return {inv,mat};
}

function calculate(){
  amountInput.value=clamp(+amountInput.value||0,100,amountRange.max);
  returnInput.value=clamp(+returnInput.value||1,1,50);
  yearInput.value=clamp(+yearInput.value||1,1,50);

  amountRange.value=amountInput.value;
  returnRange.value=returnInput.value;
  yearRange.value=yearInput.value;

  const A=+amountInput.value,r=returnInput.value/100,y=+yearInput.value;
  if(!A||!r||!y)return;

  const normal=mode==="sip"?calcSIP(A,r,y,false):calcLump(A,r,y,false);
  const adv=advToggle.checked?(mode==="sip"?calcSIP(A,r,y,true):calcLump(A,r,y,true)):normal;

  nInv.textContent=fmt(normal.inv);
  nMat.textContent=fmt(normal.mat);
  nRet.textContent=fmt(normal.mat-normal.inv);

  aInv.textContent=fmt(adv.inv);
  aMat.textContent=fmt(adv.mat);
  aRet.textContent=fmt(adv.mat-adv.inv);

  dInv.textContent=fmt(adv.inv-normal.inv);
  dMat.textContent=fmt(adv.mat-normal.mat);
  dRet.textContent=fmt((adv.mat-adv.inv)-(normal.mat-normal.inv));

  chart.data.datasets[0].data=[adv.mat-adv.inv,adv.inv];
  chart.update();
}

document.querySelectorAll("input,select").forEach(el=>el.oninput=calculate);
advToggle.onchange=()=>advancedBox.style.display=advToggle.checked?"block":"none";

sipTab.onclick=()=>{mode="sip";sipTab.classList.add("active");lumpTab.classList.remove("active");amountLabel.textContent="Monthly Investment";sipAdvance.style.display="block";lumpAdvance.style.display="none";syncAmountLimits();calculate();};
lumpTab.onclick=()=>{mode="lump";lumpTab.classList.add("active");sipTab.classList.remove("active");amountLabel.textContent="Investment Amount";sipAdvance.style.display="none";lumpAdvance.style.display="block";syncAmountLimits();calculate();};

amountRange.oninput=()=>{amountInput.value=amountRange.value;calculate();}
returnRange.oninput=()=>{returnInput.value=returnRange.value;calculate();}
yearRange.oninput=()=>{yearInput.value=yearRange.value;calculate();}

syncAmountLimits();
amountInput.value=amountRange.value=10000;
returnInput.value=returnRange.value=12;
yearInput.value=yearRange.value=10;
calculate();
</script>
</body>
</html>
