<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SIP & Lumpsum Calculator | CalcWorld</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{margin:0;font-family:Arial;background:#f6f7f9}
header{background:#fff;padding:14px 20px;border-bottom:1px solid #e5e7eb}
header a{color:#2563eb;font-size:20px;font-weight:bold;text-decoration:none}

main{max-width:420px;margin:30px auto;padding:16px}
.card{background:#fff;padding:20px;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.08)}

.tabs{display:flex;background:#eef2f7;border-radius:30px;padding:4px;margin-bottom:20px}
.tab{flex:1;text-align:center;padding:10px;font-weight:bold;border-radius:30px;cursor:pointer}
.tab.active{background:#2563eb;color:#fff}

.field{margin-bottom:16px}
.label{display:flex;justify-content:space-between;font-weight:bold;margin-bottom:6px}
.input-box{background:#eafff6;padding:6px 10px;border-radius:6px}
.input-box input{border:none;background:transparent;text-align:right;font-weight:bold;width:100px}
input[type=range]{width:100%}

.advanced-toggle{margin:12px 0;font-weight:bold}
.advanced{display:none;background:#f1f5f9;padding:12px;border-radius:12px}

.results{margin-top:16px}
.result-row{display:flex;justify-content:space-between;font-weight:bold;margin-bottom:8px}

table{width:100%;border-collapse:collapse;margin-top:16px;font-size:14px}
th,td{padding:6px}
th{text-align:left}
td{text-align:right}
.diff{font-weight:bold}

canvas{max-width:220px;margin:20px auto 0;display:block}
</style>
</head>

<body>

<header>
  <a href="https://calcworld.in/">CalcWorld</a>
</header>

<main>
<div class="card">

<!-- TABS -->
<div class="tabs">
  <div class="tab active" id="sipTab">SIP</div>
  <div class="tab" id="lumpTab">Lumpsum</div>
</div>

<!-- AMOUNT -->
<div class="field">
  <div class="label">
    <span id="amountLabel">Monthly Investment</span>
    <div class="input-box">₹ <input id="amountInput" inputmode="numeric"></div>
  </div>
  <input type="range" id="amountRange">
</div>

<!-- RETURN -->
<div class="field">
  <div class="label">
    <span>Expected Return</span>
    <div class="input-box"><input id="returnInput" inputmode="decimal"> %</div>
  </div>
  <input type="range" id="returnRange" min="1" max="40" step="0.1">
</div>

<!-- YEARS -->
<div class="field">
  <div class="label">
    <span>Time Period</span>
    <div class="input-box"><input id="yearInput" inputmode="numeric"> Yr</div>
  </div>
  <input type="range" id="yearRange" min="1" max="50" step="1">
</div>

<!-- ADVANCED TOGGLE -->
<div class="advanced-toggle">
  <label><input type="checkbox" id="advToggle"> Enable Advanced</label>
</div>

<!-- ADVANCED -->
<div class="advanced" id="advancedBox">
  Increase SIP by
  <input id="sipIncValue" value="0" inputmode="numeric" style="width:70px">
  <select id="sipIncType">
    <option value="rupee">₹</option>
    <option value="percent">%</option>
  </select>
  every
  <select id="sipIncInterval">
    <option value="12">1 Year</option>
    <option value="6">6 Months</option>
  </select>
</div>

<!-- NORMAL RESULTS -->
<div class="results" id="normalResults">
  <div class="result-row"><span>Total Invested</span><span id="nInv">₹0</span></div>
  <div class="result-row"><span>Estimated Returns</span><span id="nRet">₹0</span></div>
  <div class="result-row"><span>Maturity Value</span><span id="nMat">₹0</span></div>
</div>

<!-- COMPARISON -->
<table id="compareTable" style="display:none">
<thead>
<tr><th></th><th>Normal</th><th>Advanced</th><th>Difference</th></tr>
</thead>
<tbody>
<tr><th>Total Invested</th><td id="cInvN">₹0</td><td id="cInvA">₹0</td><td id="cInvD">₹0</td></tr>
<tr><th>Estimated Returns</th><td id="cRetN">₹0</td><td id="cRetA">₹0</td><td id="cRetD">₹0</td></tr>
<tr><th>Maturity Value</th><td id="cMatN">₹0</td><td id="cMatA">₹0</td><td id="cMatD">₹0</td></tr>
</tbody>
</table>

<canvas id="chart"></canvas>

</div>
</main>

<script>
/* ---------------- STATE ---------------- */
let mode = "sip";

/* ---------------- LIMITS ---------------- */
const LIMITS = {
  sip: { min: 100, max: 1000000 },
  lump:{ min: 100, max: 10000000 }
};

/* ---------------- HELPERS ---------------- */
const fmt = n => new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(Math.round(n));
const clamp = (v,min,max)=>Math.min(Math.max(v,min),max);

/* ---------------- CHART ---------------- */
const chart = new Chart(document.getElementById("chart"),{
  type:"doughnut",
  data:{labels:["Returns","Invested"],datasets:[{data:[0,0],backgroundColor:["#facc15","#2563eb"]}]},
  options:{plugins:{legend:{position:"bottom"}}}
});

/* ---------------- SANITIZE ---------------- */
function getAmount(){
  let v = parseInt(amountInput.value.replace(/\D/g,""));
  if(isNaN(v)) v = LIMITS[mode].min;
  v = clamp(v, LIMITS[mode].min, LIMITS[mode].max);
  amountInput.value = v;
  amountRange.value = v;
  return v;
}
function getReturn(){
  let v = parseFloat(returnInput.value);
  if(isNaN(v)) v = 12;
  v = clamp(v,1,40);
  returnInput.value = v;
  returnRange.value = v;
  return v/100;
}
function getYears(){
  let v = parseInt(yearInput.value);
  if(isNaN(v)) v = 10;
  v = clamp(v,1,50);
  yearInput.value = v;
  yearRange.value = v;
  return v;
}

/* ---------------- CALC ---------------- */
function calculate(){
  const A = getAmount();
  const r = getReturn();
  const y = getYears();

  const rm = r/12;
  const n = y*12;

  let invested = A*n;
  let maturity = A*((Math.pow(1+rm,n)-1)/rm)*(1+rm);

  nInv.textContent = fmt(invested);
  nRet.textContent = fmt(maturity-invested);
  nMat.textContent = fmt(maturity);

  chart.data.datasets[0].data = [maturity-invested, invested];
  chart.update();
}

/* ---------------- EVENTS ---------------- */
amountInput.oninput = calculate;
amountRange.oninput = ()=>{amountInput.value=amountRange.value;calculate();}
returnInput.oninput = calculate;
returnRange.oninput = ()=>{returnInput.value=returnRange.value;calculate();}
yearInput.oninput = calculate;
yearRange.oninput = ()=>{yearInput.value=yearRange.value;calculate();}

advToggle.onchange = ()=>{
  advancedBox.style.display = advToggle.checked ? "block" : "none";
  compareTable.style.display = advToggle.checked ? "table" : "none";
  normalResults.style.display = advToggle.checked ? "none" : "block";
  calculate();
};

sipTab.onclick = ()=>{
  mode="sip";
  sipTab.classList.add("active");
  lumpTab.classList.remove("active");
  amountLabel.textContent="Monthly Investment";
  amountRange.min = LIMITS.sip.min;
  amountRange.max = LIMITS.sip.max;
  calculate();
};

lumpTab.onclick = ()=>{
  mode="lump";
  lumpTab.classList.add("active");
  sipTab.classList.remove("active");
  amountLabel.textContent="Investment Amount";
  amountRange.min = LIMITS.lump.min;
  amountRange.max = LIMITS.lump.max;
  calculate();
};

/* ---------------- INIT ---------------- */
amountInput.value = 10000;
returnInput.value = 12;
yearInput.value = 10;
amountRange.min = LIMITS.sip.min;
amountRange.max = LIMITS.sip.max;
amountRange.value = 10000;
returnRange.value = 12;
yearRange.value = 10;
calculate();
</script>

</body>
</html>
