<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SIP & Lumpsum Calculator | CalcWorld</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{font-family:Arial,sans-serif;background:#f6f7f9;margin:0}
header{background:#fff;padding:16px 20px;box-shadow:0 2px 4px rgba(0,0,0,.05)}
main{max-width:420px;margin:30px auto;padding:0 16px}
.card{background:#fff;padding:20px;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.08)}

.tabs{display:flex;background:#eef2f7;border-radius:30px;padding:4px;margin-bottom:20px}
.tab{flex:1;text-align:center;padding:10px;border-radius:30px;font-weight:bold;cursor:pointer}
.tab.active{background:#2563eb;color:#fff}

.field{margin-bottom:22px}
.label{display:flex;justify-content:space-between;font-weight:bold;margin-bottom:8px}

.input-box{
  display:flex;align-items:center;gap:4px;
  background:#eafff6;padding:6px 8px;border-radius:6px
}
.input-box input{
  border:none;background:transparent;width:90px;
  text-align:right;font-weight:bold;outline:none
}

input[type=range]{width:100%}

.advanced{
  background:#f9fafb;
  padding:12px;
  border-radius:10px;
  margin-bottom:20px;
  display:none;
}

.compare{
  background:#eef2f7;
  padding:12px;
  border-radius:10px;
  margin-top:20px;
  display:none;
  font-size:13px;
}

.compare table{width:100%;border-collapse:collapse}
.compare th,.compare td{padding:6px;text-align:right}
.compare th:first-child,.compare td:first-child{text-align:left}

.results{margin-top:20px}
.result{display:flex;justify-content:space-between;margin-bottom:10px;font-weight:bold}

canvas{max-width:220px;margin:20px auto 0;display:block}
</style>
</head>

<body>

<header><h2 style="margin:0">CalcWorld</h2></header>

<main>
<div class="card">

<div class="tabs">
  <div class="tab active" id="sipTab">SIP</div>
  <div class="tab" id="lumpTab">Lumpsum</div>
</div>

<!-- Amount -->
<div class="field">
  <div class="label">
    <span id="amountLabel">Monthly Investment</span>
    <div class="input-box">₹ <input id="amountInput"></div>
  </div>
  <input type="range" id="amountRange" min="100" max="100000" step="100">
</div>

<!-- SIP ADVANCED -->
<div class="field">
  <label><input type="checkbox" id="sipStepToggle"> Increase SIP over time</label>
</div>

<div class="advanced" id="sipAdvanced">
  <div class="field">
    <label>Increase Type</label>
    <select id="sipStepType">
      <option value="fixed">Fixed (₹)</option>
      <option value="percent">Percentage (%)</option>
    </select>
  </div>

  <div class="field">
    <label>Increase Value</label>
    <input id="sipStepValue">
  </div>

  <div class="field">
    <label>Increase Interval</label>
    <select id="sipStepInterval">
      <option value="6">Every 6 Months</option>
      <option value="12">Every 1 Year</option>
    </select>
  </div>
</div>

<!-- Return -->
<div class="field">
  <div class="label">
    <span>Expected Return</span>
    <div class="input-box"><input id="returnInput"> %</div>
  </div>
  <input type="range" id="returnRange" min="1" max="40" step="0.1">
</div>

<!-- Years -->
<div class="field">
  <div class="label">
    <span>Time Period</span>
    <div class="input-box"><input id="yearInput"> Yr</div>
  </div>
  <input type="range" id="yearRange" min="1" max="50" step="1">
</div>

<div class="results">
  <div class="result"><span>Total Invested</span><span id="invested">₹0</span></div>
  <div class="result"><span>Estimated Returns</span><span id="returns">₹0</span></div>
  <div class="result"><span>Maturity Value</span><span id="maturity">₹0</span></div>
</div>

<div class="compare" id="compareBox">
<table>
<tr>
  <th></th>
  <th>Without Increase</th>
  <th>With Increase</th>
  <th>Difference</th>
</tr>
<tr>
  <td>Total Investment</td>
  <td id="cmpInvNormal"></td>
  <td id="cmpInvAdv"></td>
  <td id="cmpInvDiff"></td>
</tr>
<tr>
  <td>Estimated Returns</td>
  <td id="cmpRetNormal"></td>
  <td id="cmpRetAdv"></td>
  <td id="cmpRetDiff"></td>
</tr>
<tr>
  <td>Maturity Value</td>
  <td id="cmpMatNormal"></td>
  <td id="cmpMatAdv"></td>
  <td id="cmpMatDiff"></td>
</tr>
</table>
</div>

<canvas id="donutChart"></canvas>

</div>
</main>

<script>
const fmt=n=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(Math.round(n));
const num=v=>Math.max(0,Number(String(v).replace(/[^0-9.]/g,""))||0);

const amountInput=amountRange;
const chart=new Chart(donutChart,{
  type:"doughnut",
  data:{labels:["Returns","Invested"],datasets:[{data:[0,0],backgroundColor:["#facc15","#2563eb"]}]}
});

const sipStepToggle=document.getElementById("sipStepToggle");
const sipAdvanced=document.getElementById("sipAdvanced");

sipStepToggle.onchange=()=>{sipAdvanced.style.display=sipStepToggle.checked?"block":"none";calculate();}

document.querySelectorAll("input,select").forEach(el=>el.oninput=calculate);

function calculate(){
  const A=num(amountInput.value);
  const r=num(returnInput.value)/100;
  const y=num(yearInput.value);
  const rm=r/12, months=y*12;

  let normalInv=0, advInv=0, normalMat=0, advMat=0;

  let sip=A;
  for(let m=1;m<=months;m++){
    normalInv+=A;
    normalMat+=A*Math.pow(1+rm,months-m);

    advInv+=sip;
    advMat+=sip*Math.pow(1+rm,months-m);

    if(sipStepToggle.checked && m%Number(sipStepInterval.value)===0){
      sip += sipStepType.value==="percent"
        ? sip*num(sipStepValue.value)/100
        : num(sipStepValue.value);
    }
  }

  invested.textContent=fmt(advInv);
  maturity.textContent=fmt(advMat);
  returns.textContent=fmt(advMat-advInv);

  chart.data.datasets[0].data=[advMat-advInv,advInv];
  chart.update();

  if(sipStepToggle.checked){
    compareBox.style.display="block";
    cmpInvNormal.textContent=fmt(normalInv);
    cmpInvAdv.textContent=fmt(advInv);
    cmpInvDiff.textContent=fmt(advInv-normalInv);

    cmpRetNormal.textContent=fmt(normalMat-normalInv);
    cmpRetAdv.textContent=fmt(advMat-advInv);
    cmpRetDiff.textContent=fmt((advMat-advInv)-(normalMat-normalInv));

    cmpMatNormal.textContent=fmt(normalMat);
    cmpMatAdv.textContent=fmt(advMat);
    cmpMatDiff.textContent=fmt(advMat-normalMat);
  }else{
    compareBox.style.display="none";
  }
}

amountInput.value=10000;
returnInput.value=12;
yearInput.value=10;
sipStepValue.value=1000;
calculate();
</script>

</body>
</html>
