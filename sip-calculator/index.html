<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SIP & Lumpsum Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{font-family:Arial;background:#f6f7f9;margin:0}
main{max-width:420px;margin:30px auto;padding:16px}
.card{background:#fff;padding:20px;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.08)}

.tabs{display:flex;background:#eef2f7;border-radius:30px;padding:4px;margin-bottom:20px}
.tab{flex:1;text-align:center;padding:10px;border-radius:30px;font-weight:bold;cursor:pointer}
.tab.active{background:#2563eb;color:#fff}

.field{margin-bottom:20px}
.label{display:flex;justify-content:space-between;font-weight:bold;margin-bottom:6px}

.input-box{background:#eafff6;padding:6px 10px;border-radius:6px}
.input-box input{border:none;background:transparent;font-weight:bold;text-align:right;width:90px}

input[type=range]{width:100%}

.results{margin-top:20px}
.result{display:flex;justify-content:space-between;font-weight:bold;margin-bottom:8px}

canvas{max-width:220px;margin:20px auto 0;display:block}
</style>
</head>

<body>
<main>
<div class="card">

<div class="tabs">
  <div class="tab active" id="sipTab">SIP</div>
  <div class="tab" id="lumpTab">Lumpsum</div>
</div>

<!-- Amount -->
<div class="field">
  <div class="label">
    <span id="amountLabel">Monthly Investment</span>
    <div class="input-box">₹ <input id="amountInput"></div>
  </div>
  <input type="range" id="amountRange" min="100" max="1000000" step="100">
</div>

<!-- Return -->
<div class="field">
  <div class="label">
    <span>Expected Return</span>
    <div class="input-box"><input id="returnInput"> %</div>
  </div>
  <input type="range" id="returnRange" min="1" max="40" step="0.1">
</div>

<!-- Years -->
<div class="field">
  <div class="label">
    <span>Time Period</span>
    <div class="input-box"><input id="yearInput"> Yr</div>
  </div>
  <input type="range" id="yearRange" min="1" max="50" step="1">
</div>

<div class="results">
  <div class="result"><span>Total Invested</span><span id="invested">₹0</span></div>
  <div class="result"><span>Estimated Returns</span><span id="returns">₹0</span></div>
  <div class="result"><span>Maturity Value</span><span id="maturity">₹0</span></div>
</div>

<canvas id="chart"></canvas>

</div>
</main>

<script>
/* ================= ELEMENTS ================= */
const amountInput = document.getElementById("amountInput");
const amountRange = document.getElementById("amountRange");
const returnInput = document.getElementById("returnInput");
const returnRange = document.getElementById("returnRange");
const yearInput   = document.getElementById("yearInput");
const yearRange   = document.getElementById("yearRange");

const investedEl = document.getElementById("invested");
const returnsEl  = document.getElementById("returns");
const maturityEl = document.getElementById("maturity");

const sipTab  = document.getElementById("sipTab");
const lumpTab = document.getElementById("lumpTab");
const amountLabel = document.getElementById("amountLabel");

let mode = "sip";

/* ================= HELPERS ================= */
const format = n =>
  new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0})
  .format(Math.round(n));

/* ================= CHART ================= */
const chart = new Chart(document.getElementById("chart"),{
  type:"doughnut",
  data:{
    labels:["Returns","Invested"],
    datasets:[{data:[0,0],backgroundColor:["#facc15","#2563eb"]}]
  },
  options:{plugins:{legend:{position:"bottom"}}}
});

/* ================= CALC ================= */
function calculate(){
  const A = +amountInput.value || 0;
  const r = (+returnInput.value || 0) / 100;
  const y = +yearInput.value || 0;

  if(A<=0 || r<=0 || y<=0){
    investedEl.textContent="₹0";
    returnsEl.textContent="₹0";
    maturityEl.textContent="₹0";
    return;
  }

  let invested = 0, maturity = 0;

  if(mode==="sip"){
    const rm = r/12, n = y*12;
    invested = A * n;
    maturity = A * ((Math.pow(1+rm,n)-1)/rm) * (1+rm);
  }else{
    invested = A;
    maturity = A * Math.pow(1+r,y);
  }

  investedEl.textContent = format(invested);
  returnsEl.textContent  = format(maturity-invested);
  maturityEl.textContent = format(maturity);

  chart.data.datasets[0].data=[maturity-invested,invested];
  chart.update();
}

/* ================= SYNC ================= */
amountRange.oninput = ()=>{
  amountInput.value = amountRange.value;
  calculate();
};
returnRange.oninput = ()=>{
  returnInput.value = returnRange.value;
  calculate();
};
yearRange.oninput = ()=>{
  yearInput.value = yearRange.value;
  calculate();
};

[amountInput,returnInput,yearInput].forEach(el=>{
  el.oninput = calculate;
});

/* ================= MODE ================= */
sipTab.onclick = ()=>{
  mode="sip";
  sipTab.classList.add("active");
  lumpTab.classList.remove("active");
  amountLabel.textContent="Monthly Investment";
  calculate();
};

lumpTab.onclick = ()=>{
  mode="lump";
  lumpTab.classList.add("active");
  sipTab.classList.remove("active");
  amountLabel.textContent="Investment Amount";
  calculate();
};

/* ================= INIT ================= */
amountInput.value = amountRange.value = 10000;
returnInput.value = returnRange.value = 12;
yearInput.value   = yearRange.value   = 10;
calculate();
</script>
</body>
</html>
