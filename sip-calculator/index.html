<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SIP & Lumpsum Calculator | CalcWorld</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{font-family:Arial,sans-serif;background:#f6f7f9;margin:0}
header{background:#fff;padding:16px 20px;box-shadow:0 2px 4px rgba(0,0,0,.05)}
main{max-width:420px;margin:30px auto;padding:0 16px}
.card{background:#fff;padding:20px;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.08)}

.tabs{display:flex;background:#eef2f7;border-radius:30px;padding:4px;margin-bottom:20px}
.tab{flex:1;text-align:center;padding:10px;border-radius:30px;font-weight:bold;cursor:pointer}
.tab.active{background:#2563eb;color:#fff}

.field{margin-bottom:22px}
.label{display:flex;justify-content:space-between;font-weight:bold;margin-bottom:8px}
.input-box{display:flex;align-items:center;gap:4px}
.input-box input{width:80px;text-align:right;padding:4px}
input[type=range]{width:100%}

.results{margin-top:20px}
.result{display:flex;justify-content:space-between;margin-bottom:10px;font-weight:bold}
.result span:last-child{color:#2563eb}

canvas{max-width:220px;margin:20px auto 0;display:block}
</style>
</head>

<body>

<header><h2 style="margin:0">CalcWorld</h2></header>

<main>
<div class="card">

<div class="tabs">
  <div class="tab active" id="sipTab">SIP</div>
  <div class="tab" id="lumpTab">Lumpsum</div>
</div>

<div class="field">
  <div class="label">
    <span id="amountLabel">Monthly Investment</span>
    <div class="input-box">₹ <input type="number" id="amountInput" value="10000"></div>
  </div>
  <input type="range" id="amountRange" min="500" max="100000" step="500" value="10000">
</div>

<div class="field">
  <div class="label">
    <span>Expected Return</span>
    <div class="input-box"><input type="number" id="returnInput" step="0.1" value="11"> %</div>
  </div>
  <input type="range" id="returnRange" min="1" max="30" step="0.1" value="11">
</div>

<div class="field">
  <div class="label">
    <span>Time Period</span>
    <div class="input-box"><input type="number" id="yearInput" value="10"> Years</div>
  </div>
  <input type="range" id="yearRange" min="1" max="40" step="1" value="10">
</div>

<div class="results">
  <div class="result"><span>Total Invested</span><span id="invested">₹0</span></div>
  <div class="result"><span>Estimated Returns</span><span id="returns">₹0</span></div>
  <div class="result"><span>Maturity Value</span><span id="maturity">₹0</span></div>
</div>

<canvas id="donutChart"></canvas>

</div>
</main>

<script>
let mode="sip";

const amountInput=document.getElementById("amountInput");
const amountRange=document.getElementById("amountRange");
const returnInput=document.getElementById("returnInput");
const returnRange=document.getElementById("returnRange");
const yearInput=document.getElementById("yearInput");
const yearRange=document.getElementById("yearRange");

const investedEl=document.getElementById("invested");
const returnsEl=document.getElementById("returns");
const maturityEl=document.getElementById("maturity");
const amountLabel=document.getElementById("amountLabel");

const sipTab=document.getElementById("sipTab");
const lumpTab=document.getElementById("lumpTab");

const format=n=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(n);

const ctx=document.getElementById("donutChart");
const chart=new Chart(ctx,{
  type:"doughnut",
  data:{
    labels:["Estimated Returns","Invested Amount"],
    datasets:[{
      data:[0,0],
      backgroundColor:["#facc15","#2563eb"]
    }]
  },
  options:{plugins:{legend:{position:"bottom"}}}
});

function calculate(){
  const A=+amountInput.value;
  const r=+returnInput.value/100;
  const y=+yearInput.value;

  let invested,maturity;

  if(mode==="sip"){
    const rm=r/12,n=y*12;
    invested=A*n;
    maturity=A*((Math.pow(1+rm,n)-1)/rm)*(1+rm);
  }else{
    invested=A;
    maturity=A*Math.pow(1+r,y);
  }

  investedEl.textContent=format(invested);
  maturityEl.textContent=format(maturity);
  returnsEl.textContent=format(maturity-invested);

  chart.data.datasets[0].data=[maturity-invested,invested];
  chart.update();
}

function sync(a,b){b.value=a.value;calculate()}

[sipTab,lumpTab].forEach(tab=>{
  tab.onclick=()=>{
    sipTab.classList.remove("active");
    lumpTab.classList.remove("active");
    tab.classList.add("active");
    mode=tab===sipTab?"sip":"lump";
    amountLabel.textContent=mode==="sip"?"Monthly Investment":"Investment Amount";
    calculate();
  }
});

amountInput.oninput=()=>sync(amountInput,amountRange);
amountRange.oninput=()=>sync(amountRange,amountInput);
returnInput.oninput=()=>sync(returnInput,returnRange);
returnRange.oninput=()=>sync(returnRange,returnInput);
yearInput.oninput=()=>sync(yearInput,yearRange);
yearRange.oninput=()=>sync(yearRange,yearInput);

calculate();
</script>

</body>
</html>
