<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Annuity Calculator | CalcWorld</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family: Arial, sans-serif;
  background:#f6f7fb;
  margin:0;
}
header{
  background:#fff;
  padding:14px 20px;
  border-bottom:1px solid #e5e7eb;
}
header a{
  text-decoration:none;
  font-weight:bold;
  color:#2563eb;
  font-size:20px;
}
.card{
  max-width:420px;
  margin:40px auto;
  background:#fff;
  padding:25px;
  border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,0.08);
}
h2{
  text-align:center;
  margin-bottom:25px;
}
label{
  font-weight:bold;
  display:block;
  margin-top:18px;
}
.value{
  float:right;
  color:#059669;
}
input[type=number], select{
  width:100%;
  padding:8px;
  margin-top:6px;
}
input[type=range]{
  width:100%;
}
.radio-group{
  margin:15px 0;
}
.result{
  background:#f9fafb;
  padding:18px;
  border-radius:10px;
  margin-top:20px;
  text-align:center;
}
.result h1{
  margin:5px 0;
}
ul{
  font-size:14px;
  margin-top:15px;
}
.note{
  font-size:13px;
  margin-top:10px;
}
.footer-link{
  display:block;
  margin-top:12px;
  font-size:14px;
}
</style>
</head>

<body>

<header>
  <a href="/">CalcWorld</a>
</header>

<div class="card">
<h2>Annuity Calculator</h2>

<label>Investment Amount (₹)
  <span class="value" id="invDisplay"></span>
</label>
<input type="number" id="investment" min="100000" max="100000000" step="1000" value="1000000">
<input type="range" id="invRange" min="100000" max="100000000" step="10000" value="1000000">

<label>Annuity Rate (% p.a.)
  <span class="value" id="rateDisplay"></span>
</label>
<input type="range" id="rate" min="4" max="10" step="0.05" value="6.75">

<label>Payout Frequency</label>
<select id="frequency">
  <option value="12">Monthly</option>
  <option value="4">Quarterly</option>
  <option value="1">Yearly</option>
</select>

<label>Payout Duration (Years)
  <span class="value" id="yearsDisplay"></span>
</label>
<input type="range" id="years" min="1" max="30" value="10">

<div class="radio-group">
  <label>
    <input type="radio" name="mode" value="drawdown" checked>
    Income with capital drawdown
  </label>
  <label>
    <input type="radio" name="mode" value="fixed">
    Fixed income (capital preserved)
  </label>
</div>

<div class="result">
  <h1 id="income">₹0</h1>
  <div>Income per payout</div>
  <hr>
  <div id="totalIncome"></div>
  <div class="note">ℹ️ Payouts start after the first payout period</div>
</div>

<ul>
  <li>Fixed income pays interest only</li>
  <li>Capital drawdown exhausts corpus</li>
  <li>No compounding between payouts</li>
  <li>Income taxable as per slab</li>
</ul>

<a class="footer-link" href="/annuity-information/">Learn more about annuity rules →</a>

</div>

<script>
const investment = document.getElementById("investment");
const invRange = document.getElementById("invRange");
const rate = document.getElementById("rate");
const frequency = document.getElementById("frequency");
const years = document.getElementById("years");

const invDisplay = document.getElementById("invDisplay");
const rateDisplay = document.getElementById("rateDisplay");
const yearsDisplay = document.getElementById("yearsDisplay");
const incomeEl = document.getElementById("income");
const totalIncomeEl = document.getElementById("totalIncome");

function formatINR(n){
  return "₹" + Math.round(n).toLocaleString("en-IN");
}

function clamp(val,min,max){
  return Math.min(Math.max(val,min),max);
}

function calculate(){
  let P = clamp(Number(investment.value),100000,100000000);
  investment.value = P;
  invRange.value = P;

  const r = Number(rate.value)/100;
  const f = Number(frequency.value);
  const y = Number(years.value);
  const periods = f * y;
  const mode = document.querySelector("input[name=mode]:checked").value;

  invDisplay.textContent = formatINR(P);
  rateDisplay.textContent = rate.value + "%";
  yearsDisplay.textContent = y + " years";

  let payout = 0;

  if(mode === "fixed"){
    payout = (P * r) / f;
  } else {
    const periodRate = r / f;
    payout = P * periodRate / (1 - Math.pow(1 + periodRate, -periods));
  }

  const totalIncome = payout * periods;

  incomeEl.textContent = formatINR(payout);
  totalIncomeEl.textContent = "Total Income Received: " + formatINR(totalIncome);
}

investment.oninput = calculate;
invRange.oninput = () => { investment.value = invRange.value; calculate(); };
rate.oninput = calculate;
frequency.onchange = calculate;
years.oninput = calculate;
document.querySelectorAll("input[name=mode]").forEach(r=>r.onchange=calculate);

calculate();
</script>

</body>
</html>
