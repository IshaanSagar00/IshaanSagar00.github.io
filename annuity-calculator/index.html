<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Annuity Calculator | CalcWorld</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Arial;background:#f5f7fb;margin:0}
header{background:#fff;padding:14px 24px;box-shadow:0 2px 6px rgba(0,0,0,.1)}
header a{font-size:20px;font-weight:bold;color:#2563eb;text-decoration:none}
.card{
  max-width:440px;margin:40px auto;background:#fff;
  padding:26px;border-radius:14px;
  box-shadow:0 12px 30px rgba(0,0,0,.12)
}
h1{text-align:center;margin-bottom:20px}
label{font-weight:bold;margin-top:14px;display:block}
input,select{width:100%;margin-top:6px}
.range{margin-top:8px}
.value{float:right;color:#16a34a;font-weight:bold}
.toggle{margin-top:14px}
.result{
  margin-top:22px;background:#f8fafc;padding:16px;
  border-radius:10px;text-align:center
}
.result h2{margin:6px 0}
ul{font-size:14px;padding-left:18px;margin-top:12px}
.info{font-size:13px;color:#2563eb;margin-top:8px}
</style>
</head>

<body>

<header>
  <a href="/">CalcWorld</a>
</header>

<div class="card">
<h1>Annuity Calculator</h1>

<label>
Investment Amount (₹)
<span class="value" id="invShow"></span>
</label>
<input type="number" id="investmentInput" value="10000000" step="1000">
<input type="range" id="investmentRange" min="100000" max="20000000" step="50000">

<label>
Annuity Rate (% p.a.)
<span class="value" id="rateShow"></span>
</label>
<input type="range" id="rate" min="4" max="10" step="0.25" value="6.75">

<label>Payout Frequency</label>
<select id="frequency">
  <option value="12">Monthly</option>
  <option value="4">Quarterly</option>
  <option value="1">Yearly</option>
</select>

<label>
Payout Duration (Years)
<span class="value" id="yearShow"></span>
</label>
<input type="range" id="years" min="5" max="30" value="15">

<div class="toggle">
  <label><input type="radio" name="mode" value="fixed" checked> Fixed income (capital preserved)</label><br>
  <label><input type="radio" name="mode" value="drawdown"> Income with capital drawdown</label>
</div>

<div class="result">
  <h2 id="income"></h2>
  <div>Income per payout</div>
  <hr>
  <div id="total"></div>
  <div class="info">ⓘ Payouts start after first payout period</div>
</div>

<ul>
  <li>Fixed annuity rate decided by insurer</li>
  <li>No compounding</li>
  <li>Drawdown option exhausts corpus</li>
  <li>Income taxable as per slab</li>
</ul>

<a href="/annuity-information/" class="info">Learn more about annuity rules →</a>
</div>

<script>
const invInput = document.getElementById("investmentInput");
const invRange = document.getElementById("investmentRange");
const rate = document.getElementById("rate");
const freq = document.getElementById("frequency");
const years = document.getElementById("years");

function formatINR(x){
  return "₹" + Math.round(x).toLocaleString("en-IN");
}

function calculate(){
  const P = +invInput.value;
  const rAnnual = +rate.value / 100;
  const f = +freq.value;
  const y = +years.value;
  const n = f * y;
  const r = rAnnual / f;

  const mode = document.querySelector("input[name=mode]:checked").value;

  let payout;

  if(mode === "fixed"){
    payout = P * r / (1 - Math.pow(1 + r, -n));
  }else{
    payout = (P / n) + (P * r);
  }

  document.getElementById("invShow").innerText = formatINR(P);
  document.getElementById("rateShow").innerText = rate.value + "%";
  document.getElementById("yearShow").innerText = y + " years";

  document.getElementById("income").innerText = formatINR(payout);
  document.getElementById("total").innerText =
    "Total Income Received: " + formatINR(payout * n);
}

invInput.oninput = () => {
  invRange.value = invInput.value;
  calculate();
};
invRange.oninput = () => {
  invInput.value = invRange.value;
  calculate();
};

[rate, freq, years].forEach(el => el.oninput = calculate);
document.querySelectorAll("input[name=mode]").forEach(el => el.onchange = calculate);

calculate();
</script>

</body>
</html>
